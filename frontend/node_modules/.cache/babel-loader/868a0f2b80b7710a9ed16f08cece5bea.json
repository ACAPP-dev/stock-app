{"ast":null,"code":"var _jsxFileName = \"/Users/acapp5K1/Desktop/stocks-app/frontend/src/components/daily/DailyForm.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Form from 'react-bootstrap/Form';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Button from 'react-bootstrap/Button';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nclass DailyForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      watchlistId: '',\n      watchlistName: 'Select',\n      startDate: new Date(new Date().setDate(new Date().getDate() - 2)).toJSON().slice(0, 10),\n      chartStartDate: new Date(new Date().setDate(new Date().getDate() - 5)).toJSON().slice(0, 10),\n      endDate: new Date().toJSON().slice(0, 10),\n      chartEndDate: new Date(new Date().setDate(new Date().getDate() + 1)).toJSON().slice(0, 10)\n    };\n\n    this.convertDateToString = date => {\n      return new Date(date).toJSON().slice(0, 10);\n    };\n\n    this.convertStringToDate = date => {\n      return new Date(`${date}T00:00:00`);\n    };\n\n    this.getWeekdayStartDate = date => {\n      if (date.getDay() === 0) {\n        return new Date(new Date(date).setDate(new Date(date).getDate() - 2));\n      } else if (date.getDay() === 6) {\n        return new Date(new Date(date).setDate(new Date(date).getDate() - 1));\n      } else {\n        return date;\n      }\n    };\n\n    this.getNextThirdWeekdayEndDate = startDate => {\n      // Sun: 0, Mon: 1, Tue: 2, Wed: 3, Thu: 4, Fri: 5, Sat: 6\n      // Return number of days to add (normally 4 weekdays)\n      switch (startDate.getDay()) {\n        case 0:\n          return 5;\n\n        case 1:\n          return 4;\n\n        case 2:\n          return 6;\n\n        case 3:\n          return 6;\n\n        case 4:\n          return 6;\n\n        case 5:\n          return 6;\n\n        case 6:\n          return 5;\n\n        default:\n          return 2;\n      }\n    };\n\n    this.getPrevThirdWeekdayStartDate = endDate => {\n      // Sun: 0, Mon: 1, Tue: 2, Wed: 3, Thu: 4, Fri: 5, Sat: 6\n      // Return number of days to deduct (normally 4 weekdays)\n      switch (endDate.getDay()) {\n        case 0:\n          return 6;\n\n        case 1:\n          return 6;\n\n        case 2:\n          return 6;\n\n        case 3:\n          return 4;\n\n        case 4:\n          return 4;\n\n        case 5:\n          return 4;\n\n        case 6:\n          return 5;\n\n        default:\n          return 4;\n      }\n    };\n\n    this.getWeekdayEndDate = date => {\n      if (date.getDay() === 0) {\n        return new Date(new Date(date).setDate(new Date(date).getDate() + 1));\n      } else if (date.getDay() === 6) {\n        return new Date(new Date(date).setDate(new Date(date).getDate() + 2));\n      } else {\n        return date;\n      }\n    };\n\n    this.handleChange = event => {\n      if (event.target.name === 'startDate') {\n        // Convert input date to date format\n        const convertedStartDate = this.convertStringToDate(event.target.value); // Convert start date to weekday if needed\n\n        const weekdayStartDate = this.getWeekdayStartDate(convertedStartDate); // Calculate end date based on 3 weekdays from weekdayStartDate (current fixed)\n\n        const newEndDate = new Date(weekdayStartDate).setDate(new Date(weekdayStartDate).getDate() + this.getNextThirdWeekdayEndDate(weekdayStartDate)); // Calculate chart start date (this date is 1 day before the set start date for calculation purposes)\n\n        const chartStartDate = new Date(new Date(weekdayStartDate).setDate(new Date(weekdayStartDate).getDate() - 1)); // Convert chart start date to weekday if needed \n\n        const chartWeekdayStartDate = this.getWeekdayStartDate(chartStartDate);\n        this.setState({\n          startDate: this.convertDateToString(weekdayStartDate),\n          chartStartDate: this.convertDateToString(chartWeekdayStartDate),\n          endDate: this.convertDateToString(newEndDate),\n          chartEndDate: this.convertDateToString(newEndDate)\n        });\n      } else if (event.target.name === 'endDate') {\n        // Convert input date to date format\n        const convertedEndDate = this.convertStringToDate(event.target.value); // Convert end date to weekday if needed\n\n        const weekdayEndDate = this.getWeekdayEndDate(convertedEndDate); // Calculate start date based on 3 weekdays before weekdayEndDate (current fixed)\n\n        const newStartDate = new Date(weekdayEndDate).setDate(new Date(weekdayEndDate).getDate() - this.getPrevThirdWeekdayStartDate(weekdayEndDate)); // Calculate chart start date (this date is 1 day before the set start date for calculation purposes)\n\n        const chartStartDate = new Date(new Date(newStartDate).setDate(new Date(newStartDate).getDate() - 1)); // Convert chart start date to weekday if needed \n\n        const chartWeekdayStartDate = this.getWeekdayStartDate(chartStartDate);\n        this.setState({\n          startDate: this.convertDateToString(newStartDate),\n          chartStartDate: this.convertDateToString(chartWeekdayStartDate),\n          endDate: this.convertDateToString(weekdayEndDate),\n          chartEndDate: this.convertDateToString(weekdayEndDate)\n        });\n      }\n    };\n\n    this.dropdownSelect = (id, name) => {\n      this.setState({\n        watchlistId: id,\n        watchlistName: name\n      });\n    };\n\n    this.returnSubmit = event => {\n      event.preventDefault();\n\n      if (this.state.watchlistId > 0) {\n        this.props.returnGetData(this.state);\n      } else {\n        alert('Select watchlist to view stock data.');\n      }\n    };\n\n    this.selectWatchlist = () => {\n      return /*#__PURE__*/React.createElement(DropdownButton, {\n        title: 'Watchlist: ' + this.state.watchlistName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 17\n        }\n      }, this.props.user.watchlists.map(watchlist => {\n        return /*#__PURE__*/React.createElement(Dropdown.Item, {\n          key: watchlist.id,\n          onClick: () => this.dropdownSelect(watchlist.id, watchlist.name),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 29\n          }\n        }, watchlist.name);\n      }));\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"daily-form-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.returnSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 29\n      }\n    }, this.selectWatchlist()), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 33\n      }\n    }, \"Start Date:\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"date\",\n      onChange: this.handleChange,\n      name: \"startDate\",\n      value: this.state.startDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Form.Text, {\n      className: \"text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 33\n      }\n    }, \"Start Date for View\")), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 29\n      }\n    }, \"End Date:\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"date\",\n      onChange: this.handleChange,\n      name: \"endDate\",\n      value: this.state.endDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Form.Text, {\n      className: \"text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 33\n      }\n    }, \"End Date for View (5 Days Max)\")), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"success\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 34\n      }\n    }, \"Get Data\"))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps)(DailyForm);","map":{"version":3,"sources":["/Users/acapp5K1/Desktop/stocks-app/frontend/src/components/daily/DailyForm.js"],"names":["React","connect","Form","Dropdown","DropdownButton","Button","Row","Col","DailyForm","Component","state","watchlistId","watchlistName","startDate","Date","setDate","getDate","toJSON","slice","chartStartDate","endDate","chartEndDate","convertDateToString","date","convertStringToDate","getWeekdayStartDate","getDay","getNextThirdWeekdayEndDate","getPrevThirdWeekdayStartDate","getWeekdayEndDate","handleChange","event","target","name","convertedStartDate","value","weekdayStartDate","newEndDate","chartWeekdayStartDate","setState","convertedEndDate","weekdayEndDate","newStartDate","dropdownSelect","id","returnSubmit","preventDefault","props","returnGetData","alert","selectWatchlist","user","watchlists","map","watchlist","render","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\n\nimport Form from 'react-bootstrap/Form'\nimport Dropdown from 'react-bootstrap/Dropdown'\nimport DropdownButton from 'react-bootstrap/DropdownButton'\nimport Button from 'react-bootstrap/Button'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\n\nclass DailyForm extends React.Component {\n\n    state = {\n        watchlistId: '',\n        watchlistName: 'Select',\n        startDate: new Date(new Date().setDate(new Date().getDate() - 2)).toJSON().slice(0,10),\n        chartStartDate: new Date(new Date().setDate(new Date().getDate() - 5)).toJSON().slice(0,10),\n        endDate: new Date().toJSON().slice(0,10),\n        chartEndDate: new Date(new Date().setDate(new Date().getDate() +1)).toJSON().slice(0,10)\n    }\n\n    convertDateToString = date => {\n        return new Date(date).toJSON().slice(0,10)\n    }\n\n    convertStringToDate = date => {\n        return new Date(`${date}T00:00:00`)\n    }\n    \n    getWeekdayStartDate = date => {\n        if (date.getDay() === 0) {\n            return new Date(new Date(date).setDate(new Date(date).getDate() - 2))\n        } else if (date.getDay() === 6) {\n            return new Date(new Date(date).setDate(new Date(date).getDate() - 1))\n        } else {return date}\n    }\n\n    getNextThirdWeekdayEndDate = startDate => {\n        // Sun: 0, Mon: 1, Tue: 2, Wed: 3, Thu: 4, Fri: 5, Sat: 6\n        // Return number of days to add (normally 4 weekdays)\n        switch (startDate.getDay()) {\n            case 0:\n                return 5\n            case 1:\n                return 4\n            case 2:\n                return 6\n            case 3:\n                return 6\n            case 4:\n                return 6\n            case 5:\n                return 6\n            case 6:\n                return 5\n            default:\n                return 2\n        }\n    }\n\n    getPrevThirdWeekdayStartDate = endDate => {\n        // Sun: 0, Mon: 1, Tue: 2, Wed: 3, Thu: 4, Fri: 5, Sat: 6\n        // Return number of days to deduct (normally 4 weekdays)\n        switch (endDate.getDay()) {\n            case 0:\n                return 6\n            case 1:\n                return 6\n            case 2:\n                return 6\n            case 3:\n                return 4\n            case 4:\n                return 4\n            case 5:\n                return 4\n            case 6:\n                return 5\n            default:\n                return 4\n        }\n    }\n\n    getWeekdayEndDate = date => {\n        if (date.getDay() === 0) {\n            return new Date(new Date(date).setDate(new Date(date).getDate() + 1))\n        } else if (date.getDay() === 6) {\n            return new Date(new Date(date).setDate(new Date(date).getDate() + 2))\n        } else {return date}\n    }\n    \n    handleChange = event => {\n        \n        if (event.target.name === 'startDate') {\n            // Convert input date to date format\n            const convertedStartDate = this.convertStringToDate(event.target.value)\n            // Convert start date to weekday if needed\n            const weekdayStartDate = this.getWeekdayStartDate(convertedStartDate)\n            // Calculate end date based on 3 weekdays from weekdayStartDate (current fixed)\n            const newEndDate = new Date(weekdayStartDate).setDate(new Date(weekdayStartDate).getDate() + this.getNextThirdWeekdayEndDate(weekdayStartDate))\n            // Calculate chart start date (this date is 1 day before the set start date for calculation purposes)\n            const chartStartDate = new Date(new Date(weekdayStartDate).setDate(new Date(weekdayStartDate).getDate() - 1))\n            // Convert chart start date to weekday if needed \n            const chartWeekdayStartDate = this.getWeekdayStartDate(chartStartDate)\n            \n            this.setState({\n                startDate: this.convertDateToString(weekdayStartDate),\n                chartStartDate: this.convertDateToString(chartWeekdayStartDate),\n                endDate: this.convertDateToString(newEndDate),\n                chartEndDate: this.convertDateToString(newEndDate)\n            })\n        } else if (event.target.name === 'endDate') {\n            \n             // Convert input date to date format\n            const convertedEndDate = this.convertStringToDate(event.target.value)\n             // Convert end date to weekday if needed\n            const weekdayEndDate = this.getWeekdayEndDate(convertedEndDate)\n             // Calculate start date based on 3 weekdays before weekdayEndDate (current fixed)\n            const newStartDate = new Date(weekdayEndDate).setDate(new Date(weekdayEndDate).getDate() - this.getPrevThirdWeekdayStartDate(weekdayEndDate))\n             // Calculate chart start date (this date is 1 day before the set start date for calculation purposes)\n            const chartStartDate = new Date(new Date(newStartDate).setDate(new Date(newStartDate).getDate() - 1))\n             // Convert chart start date to weekday if needed \n            const chartWeekdayStartDate = this.getWeekdayStartDate(chartStartDate)\n\n            this.setState({\n                startDate: this.convertDateToString(newStartDate),\n                chartStartDate: this.convertDateToString(chartWeekdayStartDate),\n                endDate: this.convertDateToString(weekdayEndDate),\n                chartEndDate: this.convertDateToString(weekdayEndDate)\n            })\n        } \n    }\n\n    dropdownSelect = (id, name) => {\n        this.setState({\n            watchlistId: id,\n            watchlistName: name\n        })\n    }\n\n    returnSubmit = event => {\n        event.preventDefault()\n        if (this.state.watchlistId > 0) {\n            this.props.returnGetData(this.state)\n        } else {\n            alert('Select watchlist to view stock data.')\n        }\n    }\n\n    // <Form.Control required as=\"select\" custom></Form.Control>\n    selectWatchlist = () => {\n            return (\n                <DropdownButton \n                    title={'Watchlist: ' + this.state.watchlistName}\n                    >\n                    {this.props.user.watchlists.map(watchlist => {\n                        return (\n                            <Dropdown.Item \n                                key={watchlist.id}\n                                onClick={()=>this.dropdownSelect(watchlist.id, watchlist.name)}\n                            >{watchlist.name}</Dropdown.Item>\n                        )\n                    })}    \n                </DropdownButton>\n            )\n        }\n\n    render() {\n        return (\n            <div className='daily-form-div'>\n                    \n                <Form onSubmit={this.returnSubmit}>\n                    <Form.Group >\n                        <Row >\n                            <Col>{this.selectWatchlist()}</Col>    \n                            <Col>\n                                <Form.Label>Start Date:</Form.Label>\n                                <Form.Control type=\"date\" onChange={this.handleChange} name='startDate' value={this.state.startDate} />\n                                <Form.Text className='text-muted'>\n                                    Start Date for View\n                                </Form.Text>\n                            </Col>\n                            <Col>\n                            <Form.Label>End Date:</Form.Label>\n                                <Form.Control type=\"date\" onChange={this.handleChange} name='endDate' value={this.state.endDate} />\n                                <Form.Text className='text-muted'>\n                                    End Date for View (5 Days Max)\n                                </Form.Text>\n                            </Col>\n                            <Col><Button variant='success' type='submit'>Get Data</Button></Col>\n                        </Row>\n                    </Form.Group>\n                </Form>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {user: state.user}\n}\nexport default connect(mapStateToProps)(DailyForm)"]},"metadata":{},"sourceType":"module"}