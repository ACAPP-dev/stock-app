{"ast":null,"code":"var _jsxFileName = \"/Users/acapp5K1/Desktop/stocks-app/frontend/src/containers/DailyContainer.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport DailyRows from '../components/daily/DailyRows';\nimport DailyForm from '../components/daily/DailyForm';\nimport getDailyData from '../actions/getDailyData';\nimport Alert from 'react-bootstrap/Alert';\nimport Table from 'react-bootstrap/Table';\n\nclass DailyContainer extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.showRequesting = () => {\n      return /*#__PURE__*/React.createElement(Alert, {\n        className: \"alert\",\n        variant: \"warning\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 14,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 14,\n          columnNumber: 60\n        }\n      }, \"Requesting Data\"));\n    };\n\n    this.getDailyData = formData => {\n      const watchlistObj = this.props.user.watchlists.find(watchlist => {\n        return watchlist.id === formData.watchlistId;\n      });\n      this.props.getDailyData(formData, watchlistObj, this.props.user.id);\n    };\n\n    this.formatDate = date => {\n      const newDate = new Date(date * 1000).toUTCString();\n      return newDate.split(' ').slice(0, 4).join(' ');\n    };\n\n    this.getTableDays = () => {\n      let dateArry = ['Day0', 'Day 1', 'Day 2', 'Day 3'];\n\n      if (this.props.daily.companies.length > 0) {\n        const firstChart = this.props.daily.companies[0].charts[0] || null;\n\n        if (firstChart && firstChart.chart_lines.length > 0) {\n          dateArry = firstChart.chart_lines.map(line => {\n            return this.formatDate(line.date);\n          });\n        }\n      } // debugger\n\n\n      return dateArry;\n    };\n\n    this.findChart = company => {\n      // debugger\n      return company.charts.find(chart => chart.chart_type === 'daily');\n    };\n\n    this.formatNumber = number => {\n      if (!number || Number.isNaN(number)) {\n        return '';\n      }\n\n      const numberArry = parseFloat(number).toFixed(2).split('.');\n      numberArry[0] = numberArry[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n      return numberArry.join('.');\n    };\n\n    this.makePriceObject = chart => {\n      // Return object to use for the price data in the rows\n      const priceObject = chart.chart_lines.slice(1).map((date, index) => {\n        const prevClose = chart.chart_lines[index].close;\n        return {\n          date: date.date,\n          close: this.formatNumber(date.close),\n          dollarChg: this.formatNumber(date.close - prevClose),\n          percentChg: Math.round((date.close / prevClose - 1) * 10000) / 100\n        };\n      }); // debugger\n\n      return priceObject;\n    };\n\n    this.totalReturn = chart => {\n      const firstClose = chart.chart_lines[0].close;\n      const lastClose = chart.chart_lines[chart.chart_lines.length - 1].close;\n      return {\n        totalDollarChg: this.formatNumber(lastClose - firstClose),\n        totalPercentChg: Math.round((lastClose / firstClose - 1) * 10000) / 100\n      };\n    };\n\n    this.consolidateTableData = () => {\n      // Making object for the table data that can be sorted easier\n      let tableObject = []; // tableObject [\n      //     {\n      //         id: \"1\",\n      //         ticker: \"BAC\",\n      //         name: \"Bank of Amer\",\n      //         data: [ {date: \"xx\", close: \"xx\", chg$: \"xx\", chg%: \"xx} ]\n      //     }\n      // ]\n\n      if (this.props.daily.companies.length > 0) {\n        tableObject = this.props.daily.companies.map(company => {\n          let chartArry = [];\n\n          if (this.findChart(company)) {\n            chartArry = this.makePriceObject(this.findChart(company));\n          }\n\n          const companyObject = {\n            id: company.id,\n            ticker: company.ticker,\n            name: company.name,\n            data: chartArry,\n            totals: this.totalReturn(this.findChart(company))\n          };\n          return companyObject;\n        });\n      } // debugger\n\n\n      return tableObject;\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"daily-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }\n    }, this.props.daily.requesting ? this.showRequesting() : null, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, \"View Watchlist Stock Data for Selected Days\"), /*#__PURE__*/React.createElement(DailyForm, {\n      returnGetData: this.getDailyData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      size: \"sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 29\n      }\n    }, \"Ticker\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      colSpan: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 29\n      }\n    }, this.getTableDays()[1]), /*#__PURE__*/React.createElement(\"th\", {\n      colSpan: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 29\n      }\n    }, this.getTableDays()[2]), /*#__PURE__*/React.createElement(\"th\", {\n      colSpan: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 29\n      }\n    }, this.getTableDays()[3]), /*#__PURE__*/React.createElement(\"th\", {\n      colSpan: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 29\n      }\n    }, \"Total\")), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      colSpan: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 29\n      }\n    }, \"Close\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 29\n      }\n    }, \"$ Change\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 29\n      }\n    }, \"% Change\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 29\n      }\n    }, \"Close\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 29\n      }\n    }, \"$ Change\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 29\n      }\n    }, \"% Change\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 29\n      }\n    }, \"Close\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 29\n      }\n    }, \"$ Change\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 29\n      }\n    }, \"% Change\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }\n    }, \"$ Change\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 29\n      }\n    }, \"% Change\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }\n    }, this.props.daily.companies.length < 1 ? /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 66\n      }\n    }) : /*#__PURE__*/React.createElement(DailyRows, {\n      daily: this.consolidateTableData(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  console.log('State in dailycontainer: ', state);\n  return {\n    user: state.user,\n    daily: state.daily\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getDailyData: (formData, watchlistObj, userId) => dispatch(getDailyData(formData, watchlistObj, userId))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DailyContainer);","map":{"version":3,"sources":["/Users/acapp5K1/Desktop/stocks-app/frontend/src/containers/DailyContainer.js"],"names":["React","connect","DailyRows","DailyForm","getDailyData","Alert","Table","DailyContainer","Component","showRequesting","formData","watchlistObj","props","user","watchlists","find","watchlist","id","watchlistId","formatDate","date","newDate","Date","toUTCString","split","slice","join","getTableDays","dateArry","daily","companies","length","firstChart","charts","chart_lines","map","line","findChart","company","chart","chart_type","formatNumber","number","Number","isNaN","numberArry","parseFloat","toFixed","replace","makePriceObject","priceObject","index","prevClose","close","dollarChg","percentChg","Math","round","totalReturn","firstClose","lastClose","totalDollarChg","totalPercentChg","consolidateTableData","tableObject","chartArry","companyObject","ticker","name","data","totals","render","requesting","mapStateToProps","state","console","log","mapDispatchToProps","dispatch","userId"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\n\nimport DailyRows from '../components/daily/DailyRows'\nimport DailyForm from '../components/daily/DailyForm'\nimport getDailyData from '../actions/getDailyData'\n\nimport Alert from 'react-bootstrap/Alert'\nimport Table from 'react-bootstrap/Table'\n\nclass DailyContainer extends React.Component {\n\n    showRequesting = () => {\n        return (<Alert className='alert' variant='warning'><h4>Requesting Data</h4></Alert>)\n    }\n\n    getDailyData = formData => {\n        \n        const watchlistObj = this.props.user.watchlists.find(watchlist => {\n            return watchlist.id === formData.watchlistId\n        })\n        this.props.getDailyData(formData, watchlistObj, this.props.user.id)\n    }\n\n    formatDate = date => {\n        const newDate = new Date(date * 1000).toUTCString()\n        return newDate.split(' ').slice(0,4).join(' ')\n    }\n\n    getTableDays = () => {\n        let dateArry = ['Day0', 'Day 1', 'Day 2', 'Day 3']\n        \n        if (this.props.daily.companies.length > 0) {\n            const firstChart = this.props.daily.companies[0].charts[0] || null\n            if (firstChart && firstChart.chart_lines.length > 0) {\n                dateArry = firstChart.chart_lines.map(line => {\n                    return this.formatDate(line.date)\n                })   \n            }\n        }\n        // debugger\n        return dateArry\n    }\n\n    // Add sorting capability to daily view\n    findChart = (company) => {\n        // debugger\n        return company.charts.find(chart => chart.chart_type === 'daily')\n    }\n\n    formatNumber = number => {\n        if (!number || Number.isNaN(number)) { return '' }\n        const numberArry = parseFloat(number).toFixed(2).split('.')\n        numberArry[0] = numberArry[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n        return numberArry.join('.')\n    }\n\n    makePriceObject = (chart) => {\n        // Return object to use for the price data in the rows\n        const priceObject =  chart.chart_lines.slice(1).map( (date, index) => {\n                \n                const prevClose = chart.chart_lines[index].close\n                return (\n                    {\n                        date: date.date,\n                        close: this.formatNumber(date.close),\n                        dollarChg: this.formatNumber(date.close - prevClose),\n                        percentChg: Math.round(((date.close / prevClose) - 1) * 10000) / 100\n\n                    }\n                )})\n        // debugger\n        return priceObject\n    }\n\n    totalReturn = (chart) => {\n        const firstClose = chart.chart_lines[0].close\n        const lastClose = chart.chart_lines[chart.chart_lines.length-1].close\n\n        return { totalDollarChg: this.formatNumber(lastClose - firstClose),\n            totalPercentChg: Math.round(((lastClose / firstClose) - 1) * 10000) / 100}\n\n    }\n    consolidateTableData = () => {\n        // Making object for the table data that can be sorted easier\n        let tableObject = []\n        // tableObject [\n        //     {\n        //         id: \"1\",\n        //         ticker: \"BAC\",\n        //         name: \"Bank of Amer\",\n        //         data: [ {date: \"xx\", close: \"xx\", chg$: \"xx\", chg%: \"xx} ]\n        //     }\n        // ]\n\n        if (this.props.daily.companies.length > 0) {\n            tableObject = this.props.daily.companies.map(company => {\n                let chartArry = []\n                if (this.findChart(company)) {\n                    chartArry = this.makePriceObject(this.findChart(company))\n                    \n                    }\n\n                const companyObject = {\n                    id: company.id,\n                    ticker: company.ticker,\n                    name: company.name,\n                    data: chartArry,\n                    totals: this.totalReturn(this.findChart(company))\n                }\n                return companyObject\n            })\n        }\n        // debugger\n        return tableObject\n\n    }\n\n    render() {\n        return (\n            <div className='daily-div'>\n                {this.props.daily.requesting ? this.showRequesting() : null}\n                <h2>View Watchlist Stock Data for Selected Days</h2>\n                < DailyForm returnGetData={this.getDailyData}/>\n\n                <Table striped bordered hover size='sm'>\n                    <thead>\n                        <tr>\n                            <th>#</th>\n                            <th>Ticker</th>\n                            <th>Name</th>\n                            <th colSpan='3'>{this.getTableDays()[1]}</th>\n                            <th colSpan='3'>{this.getTableDays()[2]}</th>\n                            <th colSpan='3'>{this.getTableDays()[3]}</th>\n                            \n                            <th colSpan='2'>Total</th>\n                            \n                        </tr>\n                        <tr>\n                            <th colSpan='3'></th>\n                            <th>Close</th>\n                            <th>$ Change</th>\n                            <th>% Change</th>\n                            <th>Close</th>\n                            <th>$ Change</th>\n                            <th>% Change</th>\n                            \n                            <th>Close</th>\n                            <th>$ Change</th>\n                            <th>% Change</th>\n                            <th>$ Change</th>\n                            <th>% Change</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {/* {this.props.daily.companies.length < 1 ? <tr /> : \n                        < DailyRows daily={this.props.daily} /> } */}\n                        {this.props.daily.companies.length < 1 ? <tr /> : \n                        < DailyRows daily={this.consolidateTableData()} /> }\n\n                    </tbody>\n                </Table>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    console.log('State in dailycontainer: ', state)\n    return {\n        user: state.user,\n        daily: state.daily\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {getDailyData: (formData, watchlistObj, userId) => dispatch(getDailyData(formData, watchlistObj, userId))}\n}\n\nexport default connect (mapStateToProps, mapDispatchToProps)(DailyContainer)"]},"metadata":{},"sourceType":"module"}